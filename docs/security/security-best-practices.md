# å®‰å…¨æœ€ä½³å®è·µé¢è¯•æŒ‡å— ğŸš€

> ğŸ’­ **é¢è¯•åœºæ™¯**ï¼šé¢è¯•å®˜é—®ï¼š"ä½ èƒ½è§£é‡Šä¸€ä¸‹.NETåº”ç”¨çš„å®‰å…¨é˜²æŠ¤ç­–ç•¥å—ï¼Ÿ"
> 
> ğŸ¯ **å­¦ä¹ ç›®æ ‡**ï¼šé€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œä½ å°†èƒ½å¤Ÿï¼š
> - æ·±å…¥ç†è§£.NETåº”ç”¨å®‰å…¨çš„æ ¸å¿ƒæ¦‚å¿µå’Œé˜²æŠ¤ç­–ç•¥
> - æŒæ¡èº«ä»½è®¤è¯ã€æˆæƒã€æ•°æ®ä¿æŠ¤ç­‰å…³é”®æŠ€æœ¯
> - åœ¨é¢è¯•ä¸­è‡ªä¿¡åœ°å›ç­”ç›¸å…³é—®é¢˜
> - åœ¨å®é™…é¡¹ç›®ä¸­æ„å»ºå®‰å…¨å¯é çš„ç³»ç»Ÿ
> 
> â±ï¸ **é¢„è®¡å­¦ä¹ æ—¶é—´**ï¼š50åˆ†é’Ÿ
> 
> ğŸ† **éš¾åº¦ç­‰çº§**ï¼šâ­â­â­â­â­

## ğŸ“š å¿«é€Ÿå¯¼èˆª
- [é¢è¯•é«˜é¢‘é—®é¢˜](#é¢è¯•é«˜é¢‘é—®é¢˜)
- [æŠ€æœ¯è¦ç‚¹æ€»ç»“](#æŠ€æœ¯è¦ç‚¹æ€»ç»“)
- [å®æˆ˜åº”ç”¨æŒ‡å—](#å®æˆ˜åº”ç”¨æŒ‡å—)
- [å®‰å…¨é˜²æŠ¤æ·±åº¦æŒ‡å—](#å®‰å…¨é˜²æŠ¤æ·±åº¦æŒ‡å—)
- [é¢è¯•é‡ç‚¹æ€»ç»“](#é¢è¯•é‡ç‚¹æ€»ç»“)

---

## ğŸ† çœŸå®æ¡ˆä¾‹ï¼šå°å¼ çš„å®‰å…¨é˜²æŠ¤æŒ‘æˆ˜

> ğŸ’¡ **çœŸå®æ¡ˆä¾‹**ï¼šå°å¼ æ˜¯ä¸€å.NETå¼€å‘å·¥ç¨‹å¸ˆï¼Œæœ€è¿‘é‡åˆ°äº†ä¸€ä¸ªä¸¥é‡çš„å®‰å…¨é—®é¢˜...
> 
> å°å¼ è´Ÿè´£çš„ç”µå•†ç³»ç»Ÿçªç„¶é­åˆ°äº†æ¶æ„æ”»å‡»ï¼š
> - å¤§é‡ç”¨æˆ·è´¦æˆ·è¢«ç›—ï¼Œèµ„é‡‘è¢«è½¬ç§»
> - ç³»ç»Ÿæ•°æ®åº“è¢«æ³¨å…¥æ¶æ„ä»£ç 
> - ç”¨æˆ·ä¸ªäººä¿¡æ¯è¢«æ³„éœ²åˆ°æš—ç½‘
> - ç³»ç»Ÿè¢«å‹’ç´¢è½¯ä»¶åŠ å¯†ï¼Œè¦æ±‚æ”¯ä»˜èµé‡‘
> - å…¬å¸å£°èª‰å—æŸï¼Œé¢ä¸´æ³•å¾‹è¯‰è®¼
> 
> ğŸ¯ **æŠ€æœ¯æŒ‘æˆ˜**ï¼šå¦‚ä½•åœ¨æœ€çŸ­æ—¶é—´å†…ä¿®å¤å®‰å…¨æ¼æ´ï¼Œå¹¶å»ºç«‹å®Œå–„çš„å®‰å…¨é˜²æŠ¤ä½“ç³»ï¼Ÿ
> 
> é€šè¿‡æœ¬ç« çš„å­¦ä¹ ï¼Œä½ å°†å’Œå°å¼ ä¸€èµ·è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒæŒæ¡.NETå®‰å…¨é˜²æŠ¤çš„æ ¸å¿ƒæŠ€æœ¯ï¼

---

## â“ é¢è¯•é«˜é¢‘é—®é¢˜

### Q1: å¦‚ä½•é˜²æ­¢SQLæ³¨å…¥æ”»å‡»ï¼Ÿ

**é¢è¯•å®˜æƒ³äº†è§£ä»€ä¹ˆ**ï¼šä½ å¯¹Webå®‰å…¨çš„ç†è§£ï¼Œä»¥åŠé˜²æ­¢å¸¸è§æ”»å‡»çš„èƒ½åŠ›ã€‚

**ğŸ¯ æ ‡å‡†ç­”æ¡ˆ**ï¼š

| é˜²æŠ¤ç­–ç•¥ | å®ç°æ–¹å¼ | å®‰å…¨ç­‰çº§ | æ€§èƒ½å½±å“ | æ¨èæŒ‡æ•° |
|----------|----------|----------|----------|----------|
| **å‚æ•°åŒ–æŸ¥è¯¢** | SqlParameter | æœ€é«˜ | æ—  | â­â­â­â­â­ |
| **ORMæ¡†æ¶** | Entity Framework | é«˜ | ä½ | â­â­â­â­â­ |
| **è¾“å…¥éªŒè¯** | æ­£åˆ™è¡¨è¾¾å¼ã€ç™½åå• | ä¸­ç­‰ | ä½ | â­â­â­â­ |
| **å­˜å‚¨è¿‡ç¨‹** | é¢„ç¼–è¯‘SQL | é«˜ | ä½ | â­â­â­â­ |
| **æœ€å°æƒé™** | æ•°æ®åº“ç”¨æˆ·æƒé™æ§åˆ¶ | é«˜ | æ—  | â­â­â­â­â­ |

**ğŸ’¡ é¢è¯•åŠ åˆ†ç‚¹**ï¼šæåˆ°"æˆ‘ä¼šä½¿ç”¨å¤šå±‚é˜²æŠ¤ç­–ç•¥ï¼Œç»“åˆè¾“å…¥éªŒè¯ã€å‚æ•°åŒ–æŸ¥è¯¢å’Œæƒé™æ§åˆ¶"

**ä»£ç å®ç°**ï¼š
```csharp
// âŒ å±é™©ï¼šç›´æ¥æ‹¼æ¥SQLå­—ç¬¦ä¸²
public class DangerousUserService
{
    private readonly string _connectionString;
    
    public DangerousUserService(string connectionString)
    {
        _connectionString = connectionString;
    }
    
    public User GetUserByUsername(string username)
    {
        // å±é™©ï¼šç›´æ¥æ‹¼æ¥SQLï¼Œå®¹æ˜“è¢«æ³¨å…¥
        var sql = $"SELECT * FROM Users WHERE Username = '{username}'";
        
        using var connection = new SqlConnection(_connectionString);
        using var command = new SqlCommand(sql, connection);
        
        connection.Open();
        using var reader = command.ExecuteReader();
        
        if (reader.Read())
        {
            return new User
            {
                Id = reader.GetInt32("Id"),
                Username = reader.GetString("Username"),
                Email = reader.GetString("Email")
            };
        }
        
        return null;
    }
}

// âœ… å®‰å…¨ï¼šä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
public class SecureUserService
{
    private readonly string _connectionString;
    
    public SecureUserService(string connectionString)
    {
        _connectionString = connectionString;
    }
    
    public User GetUserByUsername(string username)
    {
        // å®‰å…¨ï¼šä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼Œé˜²æ­¢SQLæ³¨å…¥
        var sql = "SELECT * FROM Users WHERE Username = @Username";
        
        using var connection = new SqlConnection(_connectionString);
        using var command = new SqlCommand(sql, connection);
        
        // æ·»åŠ å‚æ•°ï¼Œè‡ªåŠ¨è½¬ä¹‰å’ŒéªŒè¯
        command.Parameters.AddWithValue("@Username", username);
        
        connection.Open();
        using var reader = command.ExecuteReader();
        
        if (reader.Read())
        {
            return new User
            {
                Id = reader.GetInt32("Id"),
                Username = reader.GetString("Username"),
                Email = reader.GetString("Email")
            };
        }
        
        return null;
    }
}

// âœ… æ›´å®‰å…¨ï¼šä½¿ç”¨EF Core
public class SecureUserServiceEF
{
    private readonly ApplicationDbContext _context;
    
    public SecureUserServiceEF(ApplicationDbContext context)
    {
        _context = context;
    }
    
    public async Task<User> GetUserByUsernameAsync(string username)
    {
        // EF Coreè‡ªåŠ¨ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼Œé˜²æ­¢SQLæ³¨å…¥
        return await _context.Users
            .FirstOrDefaultAsync(u => u.Username == username);
    }
}
```

---

### Q2: å¦‚ä½•é˜²æ­¢XSSæ”»å‡»ï¼Ÿ

**é¢è¯•å®˜æƒ³äº†è§£ä»€ä¹ˆ**ï¼šä½ å¯¹å‰ç«¯å®‰å…¨çš„ç†è§£ã€‚

**ğŸ¯ æ ‡å‡†ç­”æ¡ˆ**ï¼š

**XSSæ”»å‡»ç±»å‹**ï¼š
1. **å­˜å‚¨å‹XSS**ï¼šæ¶æ„è„šæœ¬å­˜å‚¨åœ¨æ•°æ®åº“ä¸­
2. **åå°„å‹XSS**ï¼šæ¶æ„è„šæœ¬é€šè¿‡URLå‚æ•°åå°„åˆ°é¡µé¢
3. **DOMå‹XSS**ï¼šæ¶æ„è„šæœ¬ä¿®æ”¹DOMç»“æ„

**é˜²æŠ¤ç­–ç•¥**ï¼š
- **è¾“å‡ºç¼–ç **ï¼šä½¿ç”¨Html.Encode()ç¼–ç è¾“å‡ºå†…å®¹
- **å†…å®¹å®‰å…¨ç­–ç•¥**ï¼šè®¾ç½®CSPå¤´ï¼Œé™åˆ¶è„šæœ¬æ‰§è¡Œ
- **è¾“å…¥éªŒè¯**ï¼šéªŒè¯å’Œè¿‡æ»¤ç”¨æˆ·è¾“å…¥
- **HttpOnly Cookie**ï¼šé˜²æ­¢JavaScriptè®¿é—®æ•æ„ŸCookie

**å…·ä½“å®ç°**ï¼š
```csharp
// âŒ å±é™©ï¼šç›´æ¥è¾“å‡ºç”¨æˆ·è¾“å…¥
public class DangerousController : Controller
{
    public IActionResult Index(string userInput)
    {
        // å±é™©ï¼šç›´æ¥è¾“å‡ºç”¨æˆ·è¾“å…¥ï¼Œå®¹æ˜“è¢«XSSæ”»å‡»
        ViewBag.UserInput = userInput;
        return View();
    }
}

// âœ… å®‰å…¨ï¼šç¼–ç è¾“å‡ºå†…å®¹
public class SecureController : Controller
{
    public IActionResult Index(string userInput)
    {
        // å®‰å…¨ï¼šç¼–ç ç”¨æˆ·è¾“å…¥ï¼Œé˜²æ­¢XSSæ”»å‡»
        ViewBag.UserInput = Html.Encode(userInput);
        return View();
    }
}

// âœ… æ›´å®‰å…¨ï¼šä½¿ç”¨å†…å®¹å®‰å…¨ç­–ç•¥
[HttpPost]
public IActionResult SetCspHeader()
{
    Response.Headers.Add("Content-Security-Policy", 
        "default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';");
    return Ok();
}
```

**ğŸ’¡ é¢è¯•åŠ åˆ†ç‚¹**ï¼šæåˆ°"æˆ‘ä¼šä½¿ç”¨å¤šå±‚é˜²æŠ¤ç­–ç•¥ï¼Œç»“åˆè¾“å‡ºç¼–ç ã€CSPå’Œè¾“å…¥éªŒè¯"

---

### Q3: å¦‚ä½•å®ç°å®‰å…¨çš„èº«ä»½è®¤è¯ï¼Ÿ

**é¢è¯•å®˜æƒ³äº†è§£ä»€ä¹ˆ**ï¼šä½ å¯¹èº«ä»½è®¤è¯çš„ç†è§£ã€‚

**ğŸ¯ æ ‡å‡†ç­”æ¡ˆ**ï¼š

**èº«ä»½è®¤è¯ç­–ç•¥**ï¼š
1. **å¯†ç ç­–ç•¥**ï¼šå¼ºå¯†ç è¦æ±‚ã€å¯†ç å“ˆå¸Œã€ç›å€¼
2. **å¤šå› ç´ è®¤è¯**ï¼šçŸ­ä¿¡éªŒè¯ç ã€é‚®ç®±éªŒè¯ã€TOTP
3. **ä¼šè¯ç®¡ç†**ï¼šå®‰å…¨çš„Sessionç®¡ç†ã€Tokenè¿‡æœŸ
4. **ç™»å½•ä¿æŠ¤**ï¼šè´¦æˆ·é”å®šã€éªŒè¯ç ã€IPé™åˆ¶

**å…·ä½“å®ç°**ï¼š
```csharp
// å¯†ç å“ˆå¸Œå’ŒéªŒè¯
public class PasswordHasher
{
    public string HashPassword(string password)
    {
        // ä½¿ç”¨BCryptè¿›è¡Œå¯†ç å“ˆå¸Œ
        return BCrypt.Net.BCrypt.HashPassword(password, BCrypt.Net.BCrypt.GenerateSalt(12));
    }
    
    public bool VerifyPassword(string password, string hashedPassword)
    {
        // éªŒè¯å¯†ç 
        return BCrypt.Net.BCrypt.Verify(password, hashedPassword);
    }
}

// JWT Tokenç”Ÿæˆå’ŒéªŒè¯
public class JwtService
{
    private readonly IConfiguration _configuration;
    
    public JwtService(IConfiguration configuration)
    {
        _configuration = configuration;
    }
    
    public string GenerateToken(User user)
    {
        var claims = new[]
        {
            new Claim(ClaimTypes.NameIdentifier, user.Id.ToString()),
            new Claim(ClaimTypes.Name, user.Username),
            new Claim(ClaimTypes.Email, user.Email),
            new Claim(ClaimTypes.Role, user.Role)
        };
        
        var key = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(_configuration["Jwt:Key"]));
        var creds = new SigningCredentials(key, SecurityAlgorithms.HmacSha256);
        
        var token = new JwtSecurityToken(
            issuer: _configuration["Jwt:Issuer"],
            audience: _configuration["Jwt:Audience"],
            claims: claims,
            expires: DateTime.Now.AddHours(1),
            signingCredentials: creds);
        
        return new JwtSecurityTokenHandler().WriteToken(token);
    }
    
    public ClaimsPrincipal ValidateToken(string token)
    {
        var tokenHandler = new JwtSecurityTokenHandler();
        var key = Encoding.UTF8.GetBytes(_configuration["Jwt:Key"]);
        
        var validationParameters = new TokenValidationParameters
        {
            ValidateIssuerSigningKey = true,
            IssuerSigningKey = new SymmetricSecurityKey(key),
            ValidateIssuer = true,
            ValidIssuer = _configuration["Jwt:Issuer"],
            ValidateAudience = true,
            ValidAudience = _configuration["Jwt:Audience"],
            ValidateLifetime = true,
            ClockSkew = TimeSpan.Zero
        };
        
        return tokenHandler.ValidateToken(token, validationParameters, out _);
    }
}
```

**ğŸ’¡ é¢è¯•åŠ åˆ†ç‚¹**ï¼šæåˆ°"æˆ‘ä¼šä½¿ç”¨BCryptè¿›è¡Œå¯†ç å“ˆå¸Œï¼Œä½¿ç”¨JWTè¿›è¡Œæ— çŠ¶æ€è®¤è¯"

---

### Q4: å¦‚ä½•å®ç°åŸºäºè§’è‰²çš„æˆæƒï¼Ÿ

**é¢è¯•å®˜æƒ³äº†è§£ä»€ä¹ˆ**ï¼šä½ å¯¹æˆæƒçš„ç†è§£ã€‚

**ğŸ¯ æ ‡å‡†ç­”æ¡ˆ**ï¼š

**æˆæƒç­–ç•¥**ï¼š
1. **åŸºäºè§’è‰²æˆæƒ**ï¼šä½¿ç”¨[Authorize(Roles = "Admin")]
2. **åŸºäºç­–ç•¥æˆæƒ**ï¼šä½¿ç”¨Policy-basedæˆæƒ
3. **åŸºäºèµ„æºæˆæƒ**ï¼šæ£€æŸ¥ç”¨æˆ·å¯¹ç‰¹å®šèµ„æºçš„æƒé™
4. **åŠ¨æ€æˆæƒ**ï¼šè¿è¡Œæ—¶æ£€æŸ¥ç”¨æˆ·æƒé™

**å…·ä½“å®ç°**ï¼š
```csharp
// åŸºäºè§’è‰²çš„æˆæƒ
[Authorize(Roles = "Admin")]
public class AdminController : Controller
{
    public IActionResult Index()
    {
        return View();
    }
}

// åŸºäºç­–ç•¥çš„æˆæƒ
public class OrderController : Controller
{
    [Authorize(Policy = "CanManageOrders")]
    public IActionResult ManageOrders()
    {
        return View();
    }
    
    [Authorize(Policy = "CanViewOrders")]
    public IActionResult ViewOrders()
    {
        return View();
    }
}

// ç­–ç•¥é…ç½®
public class Startup
{
    public void ConfigureServices(IServiceCollection services)
    {
        services.AddAuthorization(options =>
        {
            options.AddPolicy("CanManageOrders", policy =>
                policy.RequireRole("Admin", "Manager"));
            
            options.AddPolicy("CanViewOrders", policy =>
                policy.RequireRole("Admin", "Manager", "User"));
        });
    }
}

// åŸºäºèµ„æºçš„æˆæƒ
public class OrderService
{
    public async Task<bool> CanAccessOrderAsync(int userId, int orderId)
    {
        var order = await _context.Orders.FindAsync(orderId);
        if (order == null) return false;
        
        // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è®¿é—®æ­¤è®¢å•
        return order.UserId == userId || await IsUserAdminAsync(userId);
    }
}
```

**ğŸ’¡ é¢è¯•åŠ åˆ†ç‚¹**ï¼šæåˆ°"æˆ‘ä¼šä½¿ç”¨Policy-basedæˆæƒï¼Œå®ç°çµæ´»çš„æƒé™æ§åˆ¶"

---

### Q5: å¦‚ä½•ä¿æŠ¤æ•æ„Ÿæ•°æ®ï¼Ÿ

**é¢è¯•å®˜æƒ³äº†è§£ä»€ä¹ˆ**ï¼šä½ å¯¹æ•°æ®ä¿æŠ¤çš„ç†è§£ã€‚

**ğŸ¯ æ ‡å‡†ç­”æ¡ˆ**ï¼š

**æ•°æ®ä¿æŠ¤ç­–ç•¥**ï¼š
1. **æ•°æ®åŠ å¯†**ï¼šä¼ è¾“åŠ å¯†ã€å­˜å‚¨åŠ å¯†ã€å­—æ®µçº§åŠ å¯†
2. **æ•°æ®è„±æ•**ï¼šæ•æ„Ÿä¿¡æ¯è„±æ•æ˜¾ç¤º
3. **è®¿é—®æ§åˆ¶**ï¼šåŸºäºè§’è‰²çš„æ•°æ®è®¿é—®æ§åˆ¶
4. **å®¡è®¡æ—¥å¿—**ï¼šè®°å½•æ•°æ®è®¿é—®å’Œä¿®æ”¹æ“ä½œ

**å…·ä½“å®ç°**ï¼š
```csharp
// æ•°æ®åŠ å¯†æœåŠ¡
public class EncryptionService
{
    private readonly string _key;
    
    public EncryptionService(IConfiguration configuration)
    {
        _key = configuration["Encryption:Key"];
    }
    
    public string Encrypt(string plainText)
    {
        using var aes = Aes.Create();
        aes.Key = Convert.FromBase64String(_key);
        aes.GenerateIV();
        
        using var encryptor = aes.CreateEncryptor();
        using var msEncrypt = new MemoryStream();
        using var csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write);
        using var swEncrypt = new StreamWriter(csEncrypt);
        
        swEncrypt.Write(plainText);
        swEncrypt.Flush();
        csEncrypt.FlushFinalBlock();
        
        var encrypted = msEncrypt.ToArray();
        var result = new byte[aes.IV.Length + encrypted.Length];
        aes.IV.CopyTo(result, 0);
        encrypted.CopyTo(result, aes.IV.Length);
        
        return Convert.ToBase64String(result);
    }
    
    public string Decrypt(string cipherText)
    {
        var fullCipher = Convert.FromBase64String(cipherText);
        
        using var aes = Aes.Create();
        aes.Key = Convert.FromBase64String(_key);
        
        var iv = new byte[aes.IV.Length];
        var cipher = new byte[fullCipher.Length - iv.Length];
        
        Array.Copy(fullCipher, 0, iv, 0, iv.Length);
        Array.Copy(fullCipher, iv.Length, cipher, 0, cipher.Length);
        
        aes.IV = iv;
        
        using var decryptor = aes.CreateDecryptor();
        using var msDecrypt = new MemoryStream(cipher);
        using var csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read);
        using var srDecrypt = new StreamReader(csDecrypt);
        
        return srDecrypt.ReadToEnd();
    }
}

// æ•æ„Ÿæ•°æ®è„±æ•
public class DataMaskingService
{
    public string MaskEmail(string email)
    {
        if (string.IsNullOrEmpty(email)) return email;
        
        var parts = email.Split('@');
        if (parts.Length != 2) return email;
        
        var username = parts[0];
        var domain = parts[1];
        
        if (username.Length <= 2)
            return $"{username[0]}***@{domain}";
        
        return $"{username[0]}{new string('*', username.Length - 2)}{username[^1]}@{domain}";
    }
    
    public string MaskPhoneNumber(string phoneNumber)
    {
        if (string.IsNullOrEmpty(phoneNumber) || phoneNumber.Length < 4) 
            return phoneNumber;
        
        return $"{phoneNumber[..3]}****{phoneNumber[^4..]}";
    }
}
```

**ğŸ’¡ é¢è¯•åŠ åˆ†ç‚¹**ï¼šæåˆ°"æˆ‘ä¼šä½¿ç”¨AESåŠ å¯†ä¿æŠ¤æ•æ„Ÿæ•°æ®ï¼Œå®ç°æ•°æ®è„±æ•æ˜¾ç¤º"

---

### Q6: å¦‚ä½•é˜²æ­¢CSRFæ”»å‡»ï¼Ÿ

**é¢è¯•å®˜æƒ³äº†è§£ä»€ä¹ˆ**ï¼šä½ å¯¹CSRFæ”»å‡»çš„ç†è§£ã€‚

**ğŸ¯ æ ‡å‡†ç­”æ¡ˆ**ï¼š

**CSRFé˜²æŠ¤ç­–ç•¥**ï¼š
1. **Anti-Forgery Token**ï¼šä½¿ç”¨ASP.NET Coreå†…ç½®çš„é˜²ä¼ªä»¤ç‰Œ
2. **SameSite Cookie**ï¼šè®¾ç½®Cookieçš„SameSiteå±æ€§
3. **RefereréªŒè¯**ï¼šéªŒè¯è¯·æ±‚æ¥æº
4. **åŒé‡æäº¤**ï¼šè¦æ±‚ç”¨æˆ·è¿›è¡ŒäºŒæ¬¡ç¡®è®¤

**å…·ä½“å®ç°**ï¼š
```csharp
// åœ¨è§†å›¾ä¸­æ·»åŠ é˜²ä¼ªä»¤ç‰Œ
@model CreateOrderModel
<form asp-action="Create" method="post">
    @Html.AntiForgeryToken()
    
    <div class="form-group">
        <label asp-for="ProductId">äº§å“ID</label>
        <input asp-for="ProductId" class="form-control" />
    </div>
    
    <div class="form-group">
        <label asp-for="Quantity">æ•°é‡</label>
        <input asp-for="Quantity" class="form-control" />
    </div>
    
    <button type="submit" class="btn btn-primary">åˆ›å»ºè®¢å•</button>
</form>

// åœ¨æ§åˆ¶å™¨ä¸­éªŒè¯é˜²ä¼ªä»¤ç‰Œ
[HttpPost]
[ValidateAntiForgeryToken]
public async Task<IActionResult> Create(CreateOrderModel model)
{
    if (!ModelState.IsValid)
    {
        return View(model);
    }
    
    // å¤„ç†è®¢å•åˆ›å»ºé€»è¾‘
    var order = await _orderService.CreateOrderAsync(model);
    
    return RedirectToAction(nameof(Details), new { id = order.Id });
}

// é…ç½®Cookie SameSiteå±æ€§
public class Startup
{
    public void ConfigureServices(IServiceCollection services)
    {
        services.Configure<CookiePolicyOptions>(options =>
        {
            options.MinimumSameSitePolicy = SameSiteMode.Strict;
            options.HttpOnly = HttpOnlyPolicy.Always;
            options.Secure = CookieSecurePolicy.Always;
        });
    }
}
```

**ğŸ’¡ é¢è¯•åŠ åˆ†ç‚¹**ï¼šæåˆ°"æˆ‘ä¼šä½¿ç”¨ASP.NET Coreå†…ç½®çš„é˜²ä¼ªä»¤ç‰Œï¼Œé…ç½®å®‰å…¨çš„Cookieç­–ç•¥"

---

### Q7: å¦‚ä½•å®ç°å®‰å…¨çš„æ–‡ä»¶ä¸Šä¼ ï¼Ÿ

**é¢è¯•å®˜æƒ³äº†è§£ä»€ä¹ˆ**ï¼šä½ å¯¹æ–‡ä»¶å®‰å…¨çš„ç†è§£ã€‚

**ğŸ¯ æ ‡å‡†ç­”æ¡ˆ**ï¼š

**æ–‡ä»¶ä¸Šä¼ å®‰å…¨ç­–ç•¥**ï¼š
1. **æ–‡ä»¶ç±»å‹éªŒè¯**ï¼šæ£€æŸ¥æ–‡ä»¶æ‰©å±•åå’ŒMIMEç±»å‹
2. **æ–‡ä»¶å¤§å°é™åˆ¶**ï¼šé™åˆ¶ä¸Šä¼ æ–‡ä»¶çš„å¤§å°
3. **æ–‡ä»¶å†…å®¹æ‰«æ**ï¼šæ‰«ææ–‡ä»¶å†…å®¹ï¼Œæ£€æµ‹æ¶æ„ä»£ç 
4. **å­˜å‚¨å®‰å…¨**ï¼šå°†æ–‡ä»¶å­˜å‚¨åœ¨å®‰å…¨çš„ä½ç½®ï¼Œé™åˆ¶è®¿é—®æƒé™

**å…·ä½“å®ç°**ï¼š
```csharp
// å®‰å…¨çš„æ–‡ä»¶ä¸Šä¼ æœåŠ¡
public class SecureFileUploadService
{
    private readonly string[] _allowedExtensions = { ".jpg", ".jpeg", ".png", ".gif", ".pdf", ".doc", ".docx" };
    private readonly string[] _allowedMimeTypes = { "image/jpeg", "image/png", "image/gif", "application/pdf", "application/msword", "application/vnd.openxmlformats-officedocument.wordprocessingml.document" };
    private readonly long _maxFileSize = 10 * 1024 * 1024; // 10MB
    
    public async Task<FileUploadResult> UploadFileAsync(IFormFile file)
    {
        var result = new FileUploadResult();
        
        try
        {
            // éªŒè¯æ–‡ä»¶å¤§å°
            if (file.Length > _maxFileSize)
            {
                result.Success = false;
                result.ErrorMessage = "æ–‡ä»¶å¤§å°è¶…è¿‡é™åˆ¶";
                return result;
            }
            
            // éªŒè¯æ–‡ä»¶æ‰©å±•å
            var extension = Path.GetExtension(file.FileName).ToLowerInvariant();
            if (!_allowedExtensions.Contains(extension))
            {
                result.Success = false;
                result.ErrorMessage = "ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹";
                return result;
            }
            
            // éªŒè¯MIMEç±»å‹
            if (!_allowedMimeTypes.Contains(file.ContentType.ToLowerInvariant()))
            {
                result.Success = false;
                result.ErrorMessage = "ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹";
                return result;
            }
            
            // ç”Ÿæˆå®‰å…¨çš„æ–‡ä»¶å
            var fileName = GenerateSecureFileName(file.FileName);
            var filePath = Path.Combine("uploads", fileName);
            
            // ä¿å­˜æ–‡ä»¶
            using var stream = new FileStream(filePath, FileMode.Create);
            await file.CopyToAsync(stream);
            
            result.Success = true;
            result.FileName = fileName;
            result.FilePath = filePath;
        }
        catch (Exception ex)
        {
            result.Success = false;
            result.ErrorMessage = "æ–‡ä»¶ä¸Šä¼ å¤±è´¥";
            result.Exception = ex;
        }
        
        return result;
    }
    
    private string GenerateSecureFileName(string originalFileName)
    {
        var extension = Path.GetExtension(originalFileName);
        var fileName = Path.GetFileNameWithoutExtension(originalFileName);
        
        // ç§»é™¤ç‰¹æ®Šå­—ç¬¦ï¼Œç”Ÿæˆå®‰å…¨çš„æ–‡ä»¶å
        fileName = Regex.Replace(fileName, @"[^a-zA-Z0-9\-_]", "");
        
        // æ·»åŠ æ—¶é—´æˆ³ï¼Œé¿å…æ–‡ä»¶åå†²çª
        var timestamp = DateTime.Now.ToString("yyyyMMddHHmmss");
        
        return $"{fileName}_{timestamp}{extension}";
    }
}

public class FileUploadResult
{
    public bool Success { get; set; }
    public string FileName { get; set; }
    public string FilePath { get; set; }
    public string ErrorMessage { get; set; }
    public Exception Exception { get; set; }
}
```

**ğŸ’¡ é¢è¯•åŠ åˆ†ç‚¹**ï¼šæåˆ°"æˆ‘ä¼šä½¿ç”¨å¤šå±‚éªŒè¯ç­–ç•¥ï¼ŒåŒ…æ‹¬æ–‡ä»¶ç±»å‹ã€å¤§å°ã€å†…å®¹æ‰«æå’Œå­˜å‚¨å®‰å…¨"

---

## ğŸ—ï¸ å®æˆ˜åœºæ™¯åˆ†æ

### åœºæ™¯1ï¼šç”µå•†ç³»ç»Ÿå®‰å…¨é˜²æŠ¤

**ä¸šåŠ¡éœ€æ±‚**ï¼šä¿æŠ¤ç”¨æˆ·è´¦æˆ·å’Œæ”¯ä»˜ä¿¡æ¯çš„å®‰å…¨

**ğŸ¯ æŠ€æœ¯æ–¹æ¡ˆ**ï¼š

```
ç”¨æˆ·è¯·æ±‚ â†’ å®‰å…¨ç½‘å…³ â†’ åº”ç”¨å±‚ â†’ æ•°æ®å±‚
   â†“         â†“         â†“         â†“
  è¾“å…¥éªŒè¯   èº«ä»½è®¤è¯   ä¸šåŠ¡é€»è¾‘   æ•°æ®åŠ å¯†
```

**æ ¸å¿ƒå®ç°**ï¼š
1. **èº«ä»½è®¤è¯**ï¼šJWT Token + å¤šå› ç´ è®¤è¯
2. **æ•°æ®ä¿æŠ¤**ï¼šæ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨ï¼Œä¼ è¾“ä½¿ç”¨HTTPS
3. **è®¿é—®æ§åˆ¶**ï¼šåŸºäºè§’è‰²çš„æƒé™æ§åˆ¶
4. **å®‰å…¨ç›‘æ§**ï¼šå®æ—¶ç›‘æ§å¼‚å¸¸è®¿é—®å’Œæ”»å‡»è¡Œä¸º

**ğŸ”‘ å…³é”®å†³ç­–**ï¼šä½¿ç”¨å¤šå±‚å®‰å…¨é˜²æŠ¤ï¼Œå®ç°çºµæ·±é˜²å¾¡

---

### åœºæ™¯2ï¼šé‡‘èç³»ç»Ÿå®‰å…¨é˜²æŠ¤

**ä¸šåŠ¡éœ€æ±‚**ï¼šä¿æŠ¤é‡‘èäº¤æ˜“å’Œç”¨æˆ·èµ„é‡‘å®‰å…¨

**ğŸ¯ æŠ€æœ¯æ–¹æ¡ˆ**ï¼š

```
äº¤æ˜“è¯·æ±‚ â†’ é£æ§ç³»ç»Ÿ â†’ å®‰å…¨éªŒè¯ â†’ äº¤æ˜“å¤„ç†
   â†“         â†“         â†“         â†“
  é£é™©è¯„ä¼°   è§„åˆ™å¼•æ“   å¤šå› ç´ éªŒè¯   å®‰å…¨å¤„ç†
```

**æ ¸å¿ƒå®ç°**ï¼š
1. **é£æ§ç³»ç»Ÿ**ï¼šå®æ—¶é£é™©è¯„ä¼°å’Œå¼‚å¸¸æ£€æµ‹
2. **å®‰å…¨éªŒè¯**ï¼šå¤šå› ç´ è®¤è¯ã€ç”Ÿç‰©è¯†åˆ«
3. **æ•°æ®åŠ å¯†**ï¼šç«¯åˆ°ç«¯åŠ å¯†ï¼Œå¯†é’¥ç®¡ç†
4. **å®¡è®¡æ—¥å¿—**ï¼šå®Œæ•´çš„æ“ä½œå®¡è®¡å’Œåˆè§„è®°å½•

---

## ğŸ“Š å®‰å…¨é˜²æŠ¤å·¥å…·å¯¹æ¯”

### èº«ä»½è®¤è¯å·¥å…·å¯¹æ¯”

| å·¥å…· | é€‚ç”¨åœºæ™¯ | ä¼˜åŠ¿ | åŠ£åŠ¿ |
|------|----------|------|------|
| **ASP.NET Core Identity** | å†…ç½®èº«ä»½è®¤è¯ | é›†æˆåº¦é«˜ï¼ŒåŠŸèƒ½å®Œæ•´ | å®šåˆ¶åŒ–ç¨‹åº¦æœ‰é™ |
| **IdentityServer** | å•ç‚¹ç™»å½• | åŠŸèƒ½å¼ºå¤§ï¼Œæ”¯æŒOAuth2 | å­¦ä¹ æ›²çº¿é™¡å³­ |
| **Auth0** | ç¬¬ä¸‰æ–¹è®¤è¯ | åŠŸèƒ½ä¸°å¯Œï¼Œæ˜“äºä½¿ç”¨ | æˆæœ¬è¾ƒé«˜ |
| **è‡ªç ”è®¤è¯** | ç‰¹æ®Šéœ€æ±‚ | å®Œå…¨å¯æ§ï¼Œå®šåˆ¶åŒ–é«˜ | å¼€å‘æˆæœ¬é«˜ |

### åŠ å¯†å·¥å…·å¯¹æ¯”

| å·¥å…· | é€‚ç”¨åœºæ™¯ | ä¼˜åŠ¿ | åŠ£åŠ¿ |
|------|----------|------|------|
| **AES** | å¯¹ç§°åŠ å¯† | æ€§èƒ½é«˜ï¼Œå®‰å…¨æ€§å¥½ | å¯†é’¥ç®¡ç†å¤æ‚ |
| **RSA** | éå¯¹ç§°åŠ å¯† | å¯†é’¥ç®¡ç†ç®€å• | æ€§èƒ½è¾ƒä½ |
| **BCrypt** | å¯†ç å“ˆå¸Œ | å®‰å…¨æ€§é«˜ï¼Œè‡ªåŠ¨åŠ ç› | è®¡ç®—å¼€é”€å¤§ |
| **Argon2** | å¯†ç å“ˆå¸Œ | æœ€æ–°ç®—æ³•ï¼Œå®‰å…¨æ€§æœ€é«˜ | è®¡ç®—å¼€é”€å¤§ |

---

## ğŸ—ï¸ å®‰å…¨é˜²æŠ¤æ·±åº¦æŒ‡å—

### 1.1 OWASP Top 10é˜²æŠ¤ç­–ç•¥

**ğŸ¯ æ ¸å¿ƒé—®é¢˜**ï¼šå¦‚ä½•é˜²æŠ¤OWASP Top 10å®‰å…¨å¨èƒï¼Ÿ

**OWASP Top 10é˜²æŠ¤ç­–ç•¥**ï¼š
1. **æ³¨å…¥æ”»å‡»**ï¼šå‚æ•°åŒ–æŸ¥è¯¢ã€è¾“å…¥éªŒè¯ã€è¾“å‡ºç¼–ç 
2. **èº«ä»½è®¤è¯å¤±æ•ˆ**ï¼šå¼ºå¯†ç ç­–ç•¥ã€å¤šå› ç´ è®¤è¯ã€ä¼šè¯ç®¡ç†
3. **æ•æ„Ÿæ•°æ®æ³„éœ²**ï¼šæ•°æ®åŠ å¯†ã€ä¼ è¾“åŠ å¯†ã€è®¿é—®æ§åˆ¶
4. **XMLå¤–éƒ¨å®ä½“**ï¼šç¦ç”¨å¤–éƒ¨å®ä½“ã€ä½¿ç”¨å®‰å…¨çš„XMLè§£æå™¨
5. **è®¿é—®æ§åˆ¶å¤±æ•ˆ**ï¼šåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ã€æœ€å°æƒé™åŸåˆ™
6. **å®‰å…¨é…ç½®é”™è¯¯**ï¼šå®‰å…¨é…ç½®ã€å®šæœŸå®‰å…¨å®¡è®¡
7. **XSSæ”»å‡»**ï¼šè¾“å‡ºç¼–ç ã€å†…å®¹å®‰å…¨ç­–ç•¥ã€è¾“å…¥éªŒè¯
8. **ä¸å®‰å…¨çš„ååºåˆ—åŒ–**ï¼šä½¿ç”¨å®‰å…¨çš„åºåˆ—åŒ–æ ¼å¼ã€è¾“å…¥éªŒè¯
9. **ä½¿ç”¨å·²çŸ¥æ¼æ´ç»„ä»¶**ï¼šå®šæœŸæ›´æ–°ç»„ä»¶ã€æ¼æ´æ‰«æ
10. **ä¸è¶³çš„æ—¥å¿—è®°å½•**ï¼šå®Œæ•´çš„å®¡è®¡æ—¥å¿—ã€æ—¥å¿—ç›‘æ§

**ğŸ’¡ é¢è¯•åŠ åˆ†ç‚¹**ï¼š
- æåˆ°å…·ä½“ç­–ç•¥ï¼š"æˆ‘ä¼šä½¿ç”¨OWASP ASVSæ¡†æ¶è¯„ä¼°åº”ç”¨å®‰å…¨æ€§ï¼Œå®šæœŸè¿›è¡Œå®‰å…¨å®¡è®¡"
- å±•ç¤ºå®‰å…¨æ„è¯†ï¼š"å»ºç«‹å®‰å…¨å¼€å‘ç”Ÿå‘½å‘¨æœŸ(SDLC)ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­é›†æˆå®‰å…¨æµ‹è¯•"

### 1.2 ç½‘ç»œå®‰å…¨é˜²æŠ¤ç­–ç•¥

**ğŸ¯ æ ¸å¿ƒé—®é¢˜**ï¼šå¦‚ä½•ä¿æŠ¤ç½‘ç»œé€šä¿¡å®‰å…¨ï¼Ÿ

**ç½‘ç»œå®‰å…¨ç­–ç•¥**ï¼š
1. **HTTPSå¼ºåˆ¶**ï¼šæ‰€æœ‰é€šä¿¡ä½¿ç”¨HTTPSï¼Œé…ç½®HSTS
2. **è¯ä¹¦ç®¡ç†**ï¼šä½¿ç”¨æœ‰æ•ˆçš„SSLè¯ä¹¦ï¼Œå®šæœŸæ›´æ–°
3. **ç½‘ç»œéš”ç¦»**ï¼šä½¿ç”¨VLANã€é˜²ç«å¢™éš”ç¦»ä¸åŒç½‘ç»œ
4. **å…¥ä¾µæ£€æµ‹**ï¼šéƒ¨ç½²IDS/IPSç³»ç»Ÿï¼Œç›‘æ§ç½‘ç»œæµé‡

**å…·ä½“å®ç°**ï¼š
```csharp
// å¼ºåˆ¶HTTPSä¸­é—´ä»¶
public class HttpsRedirectionMiddleware
{
    private readonly RequestDelegate _next;
    
    public HttpsRedirectionMiddleware(RequestDelegate next)
    {
        _next = next;
    }
    
    public async Task InvokeAsync(HttpContext context)
    {
        if (!context.Request.IsHttps)
        {
            var httpsUrl = $"https://{context.Request.Host}{context.Request.Path}{context.Request.QueryString}";
            context.Response.Redirect(httpsUrl, permanent: true);
            return;
        }
        
        await _next(context);
    }
}

// å®‰å…¨å¤´é…ç½®
public class SecurityHeadersMiddleware
{
    private readonly RequestDelegate _next;
    
    public SecurityHeadersMiddleware(RequestDelegate next)
    {
        _next = next;
    }
    
    public async Task InvokeAsync(HttpContext context)
    {
        // æ·»åŠ å®‰å…¨å¤´
        context.Response.Headers.Add("X-Frame-Options", "DENY");
        context.Response.Headers.Add("X-Content-Type-Options", "nosniff");
        context.Response.Headers.Add("X-XSS-Protection", "1; mode=block");
        context.Response.Headers.Add("Referrer-Policy", "strict-origin-when-cross-origin");
        
        await _next(context);
    }
}
```

**ğŸ’¡ é¢è¯•åŠ åˆ†ç‚¹**ï¼š
- æåˆ°å…·ä½“é…ç½®ï¼š"é…ç½®HSTSå¼ºåˆ¶HTTPSï¼Œè®¾ç½®å®‰å…¨å¤´é˜²æ­¢ç‚¹å‡»åŠ«æŒå’ŒXSSæ”»å‡»"
- å±•ç¤ºç½‘ç»œçŸ¥è¯†ï¼š"ä½¿ç”¨ç½‘ç»œéš”ç¦»å’Œå…¥ä¾µæ£€æµ‹ç³»ç»Ÿï¼Œå»ºç«‹å¤šå±‚ç½‘ç»œå®‰å…¨é˜²æŠ¤"

### 1.3 æ•°æ®å®‰å…¨é˜²æŠ¤ç­–ç•¥

**ğŸ¯ æ ¸å¿ƒé—®é¢˜**ï¼šå¦‚ä½•ä¿æŠ¤æ•æ„Ÿæ•°æ®å®‰å…¨ï¼Ÿ

**æ•°æ®å®‰å…¨ç­–ç•¥**ï¼š
1. **æ•°æ®åˆ†ç±»**ï¼šæ ¹æ®æ•æ„Ÿç¨‹åº¦å¯¹æ•°æ®è¿›è¡Œåˆ†ç±»
2. **åŠ å¯†ç­–ç•¥**ï¼šæ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨ï¼Œä¼ è¾“åŠ å¯†
3. **è®¿é—®æ§åˆ¶**ï¼šåŸºäºè§’è‰²çš„æ•°æ®è®¿é—®æ§åˆ¶
4. **æ•°æ®è„±æ•**ï¼šæ•æ„Ÿä¿¡æ¯è„±æ•æ˜¾ç¤ºå’Œå­˜å‚¨

**å…·ä½“å®ç°**ï¼š
```csharp
// æ•°æ®åˆ†ç±»å’ŒåŠ å¯†
public class DataClassificationService
{
    public enum DataSensitivity
    {
        Public,
        Internal,
        Confidential,
        Restricted
    }
    
    public class DataClassification
    {
        public string FieldName { get; set; }
        public DataSensitivity Sensitivity { get; set; }
        public bool RequiresEncryption { get; set; }
        public bool RequiresMasking { get; set; }
    }
    
    private readonly Dictionary<string, DataClassification> _classifications;
    
    public DataClassificationService()
    {
        _classifications = new Dictionary<string, DataClassification>
        {
            { "Email", new DataClassification { FieldName = "Email", Sensitivity = DataSensitivity.Confidential, RequiresEncryption = true, RequiresMasking = true } },
            { "PhoneNumber", new DataClassification { FieldName = "PhoneNumber", Sensitivity = DataSensitivity.Confidential, RequiresEncryption = true, RequiresMasking = true } },
            { "CreditCard", new DataClassification { FieldName = "CreditCard", Sensitivity = DataSensitivity.Restricted, RequiresEncryption = true, RequiresMasking = true } },
            { "Name", new DataClassification { FieldName = "Name", Sensitivity = DataSensitivity.Internal, RequiresEncryption = false, RequiresMasking = false } }
        };
    }
    
    public DataClassification GetClassification(string fieldName)
    {
        return _classifications.TryGetValue(fieldName, out var classification) ? classification : null;
    }
}

// æ•°æ®è„±æ•æœåŠ¡
public class DataMaskingService
{
    public string MaskData(string data, string fieldName, DataClassificationService.DataSensitivity sensitivity)
    {
        if (string.IsNullOrEmpty(data)) return data;
        
        return sensitivity switch
        {
            DataClassificationService.DataSensitivity.Public => data,
            DataClassificationService.DataSensitivity.Internal => MaskInternalData(data),
            DataClassificationService.DataSensitivity.Confidential => MaskConfidentialData(data),
            DataClassificationService.DataSensitivity.Restricted => MaskRestrictedData(data),
            _ => data
        };
    }
    
    private string MaskInternalData(string data)
    {
        if (data.Length <= 2) return data;
        return $"{data[0]}{new string('*', data.Length - 2)}";
    }
    
    private string MaskConfidentialData(string data)
    {
        if (data.Length <= 4) return new string('*', data.Length);
        return $"{data[..2]}{new string('*', data.Length - 4)}{data[^2..]}";
    }
    
    private string MaskRestrictedData(string data)
    {
        return new string('*', data.Length);
    }
}
```

**ğŸ’¡ é¢è¯•åŠ åˆ†ç‚¹**ï¼š
- æåˆ°å…·ä½“å®ç°ï¼š"æˆ‘ä¼šæ ¹æ®æ•°æ®æ•æ„Ÿç¨‹åº¦å®æ–½ä¸åŒçš„ä¿æŠ¤ç­–ç•¥ï¼Œä½¿ç”¨åŠ å¯†å’Œè„±æ•æŠ€æœ¯"
- å±•ç¤ºåˆè§„æ„è¯†ï¼š"éµå¾ªæ•°æ®ä¿æŠ¤æ³•è§„ï¼Œå»ºç«‹å®Œæ•´çš„æ•°æ®å®‰å…¨ç­–ç•¥å’Œæµç¨‹"

---

## ğŸš€ å®‰å…¨ç›‘æ§å’Œå“åº”

### 2.1 å®‰å…¨ç›‘æ§ä½“ç³»è®¾è®¡

**ğŸ¯ æ ¸å¿ƒé—®é¢˜**ï¼šå¦‚ä½•å»ºç«‹å®Œå–„çš„å®‰å…¨ç›‘æ§ä½“ç³»ï¼Ÿ

**å®‰å…¨ç›‘æ§ç­–ç•¥**ï¼š
1. **å®æ—¶ç›‘æ§**ï¼šç›‘æ§ç³»ç»Ÿè®¿é—®ã€å¼‚å¸¸è¡Œä¸ºã€æ”»å‡»å°è¯•
2. **æ—¥å¿—åˆ†æ**ï¼šåˆ†æå®‰å…¨æ—¥å¿—ï¼Œè¯†åˆ«å¨èƒæ¨¡å¼
3. **å¨èƒæƒ…æŠ¥**ï¼šé›†æˆå¨èƒæƒ…æŠ¥ï¼Œæå‰é¢„è­¦
4. **è‡ªåŠ¨åŒ–å“åº”**ï¼šè‡ªåŠ¨å“åº”å¸¸è§å®‰å…¨äº‹ä»¶

**ç›‘æ§å·¥å…·é€‰æ‹©**ï¼š
- **SIEMç³»ç»Ÿ**ï¼šé›†ä¸­åŒ–å®‰å…¨ä¿¡æ¯ç®¡ç†
- **EDRç³»ç»Ÿ**ï¼šç»ˆç«¯æ£€æµ‹å’Œå“åº”
- **ç½‘ç»œç›‘æ§**ï¼šç½‘ç»œæµé‡åˆ†æå’Œå¼‚å¸¸æ£€æµ‹
- **åº”ç”¨ç›‘æ§**ï¼šåº”ç”¨å±‚å®‰å…¨ç›‘æ§å’Œå¼‚å¸¸æ£€æµ‹

**ğŸ’¡ é¢è¯•åŠ åˆ†ç‚¹**ï¼š
- æåˆ°å…·ä½“å·¥å…·ï¼š"ä½¿ç”¨Azure Sentinelè¿›è¡Œå®‰å…¨ç›‘æ§ï¼Œé›†æˆå¨èƒæƒ…æŠ¥å’Œè‡ªåŠ¨åŒ–å“åº”"
- å±•ç¤ºç›‘æ§æ€ç»´ï¼š"å»ºç«‹å®Œæ•´çš„å®‰å…¨ç›‘æ§ä½“ç³»ï¼ŒåŒ…æ‹¬å®æ—¶ç›‘æ§ã€æ—¥å¿—åˆ†æå’Œè‡ªåŠ¨åŒ–å“åº”"

### 2.2 å®‰å…¨äº‹ä»¶å“åº”

**ğŸ¯ æ ¸å¿ƒé—®é¢˜**ï¼šå¦‚ä½•æœ‰æ•ˆå“åº”å®‰å…¨äº‹ä»¶ï¼Ÿ

**äº‹ä»¶å“åº”æµç¨‹**ï¼š
1. **äº‹ä»¶æ£€æµ‹**ï¼šè‡ªåŠ¨æˆ–æ‰‹åŠ¨æ£€æµ‹å®‰å…¨äº‹ä»¶
2. **äº‹ä»¶åˆ†ç±»**ï¼šæ ¹æ®ä¸¥é‡ç¨‹åº¦åˆ†ç±»äº‹ä»¶
3. **äº‹ä»¶è°ƒæŸ¥**ï¼šæ·±å…¥è°ƒæŸ¥äº‹ä»¶åŸå› å’Œå½±å“
4. **äº‹ä»¶å“åº”**ï¼šé‡‡å–ç›¸åº”æªæ–½å¤„ç†äº‹ä»¶
5. **äº‹ä»¶æ¢å¤**ï¼šæ¢å¤æ­£å¸¸è¿è¥çŠ¶æ€
6. **äº‹ä»¶æ€»ç»“**ï¼šæ€»ç»“ç»éªŒæ•™è®­ï¼Œæ”¹è¿›é˜²æŠ¤æªæ–½

**è‡ªåŠ¨åŒ–å“åº”ç­–ç•¥**ï¼š
- **è´¦æˆ·é”å®š**ï¼šæ£€æµ‹åˆ°å¼‚å¸¸ç™»å½•æ—¶è‡ªåŠ¨é”å®šè´¦æˆ·
- **IPå°ç¦**ï¼šæ£€æµ‹åˆ°æ”»å‡»æ—¶è‡ªåŠ¨å°ç¦IPåœ°å€
- **æœåŠ¡é™çº§**ï¼šæ£€æµ‹åˆ°æ”»å‡»æ—¶è‡ªåŠ¨é™çº§æœåŠ¡
- **å‘Šè­¦é€šçŸ¥**ï¼šè‡ªåŠ¨é€šçŸ¥ç›¸å…³äººå‘˜å¤„ç†å®‰å…¨äº‹ä»¶

**ğŸ’¡ é¢è¯•åŠ åˆ†ç‚¹**ï¼š
- æåˆ°å…·ä½“å®ç°ï¼š"å»ºç«‹å®‰å…¨äº‹ä»¶å“åº”å›¢é˜Ÿï¼Œåˆ¶å®šè¯¦ç»†çš„å“åº”æµç¨‹å’Œè‡ªåŠ¨åŒ–ç­–ç•¥"
- å±•ç¤ºå“åº”èƒ½åŠ›ï¼š"å®šæœŸè¿›è¡Œå®‰å…¨æ¼”ç»ƒï¼Œæé«˜å›¢é˜Ÿçš„å®‰å…¨äº‹ä»¶å“åº”èƒ½åŠ›"

---

## ğŸ¯ é¢è¯•é‡ç‚¹æ€»ç»“

### 3.1 é«˜é¢‘æŠ€æœ¯é—®é¢˜

**Webå®‰å…¨æ ¸å¿ƒç†è§£**
- **å¸¸è§æ”»å‡»**ï¼šç†è§£SQLæ³¨å…¥ã€XSSã€CSRFç­‰å¸¸è§æ”»å‡»åŸç†
- **é˜²æŠ¤ç­–ç•¥**ï¼šæŒæ¡å„ç§æ”»å‡»çš„é˜²æŠ¤ç­–ç•¥å’Œå®ç°æ–¹æ³•
- **å®‰å…¨ç¼–ç **ï¼šèƒ½å¤Ÿç¼–å†™å®‰å…¨çš„ä»£ç ï¼Œé¿å…å¸¸è§å®‰å…¨æ¼æ´
- **å®‰å…¨æµ‹è¯•**ï¼šèƒ½å¤Ÿè¿›è¡Œå®‰å…¨æµ‹è¯•ï¼Œè¯†åˆ«å®‰å…¨æ¼æ´

**èº«ä»½è®¤è¯å’Œæˆæƒ**
- **è®¤è¯æœºåˆ¶**ï¼šç†è§£å„ç§èº«ä»½è®¤è¯æœºåˆ¶å’Œå®ç°æ–¹æ³•
- **æˆæƒç­–ç•¥**ï¼šæŒæ¡åŸºäºè§’è‰²å’Œç­–ç•¥çš„æˆæƒå®ç°
- **ä¼šè¯ç®¡ç†**ï¼šç†è§£å®‰å…¨çš„ä¼šè¯ç®¡ç†å’ŒTokenç®¡ç†
- **å¤šå› ç´ è®¤è¯**ï¼šæŒæ¡å¤šå› ç´ è®¤è¯çš„å®ç°æ–¹æ³•

**æ•°æ®å®‰å…¨ä¿æŠ¤**
- **æ•°æ®åŠ å¯†**ï¼šç†è§£æ•°æ®åŠ å¯†çš„åŸç†å’Œå®ç°æ–¹æ³•
- **æ•°æ®è„±æ•**ï¼šæŒæ¡æ•°æ®è„±æ•çš„æŠ€æœ¯å’Œç­–ç•¥
- **è®¿é—®æ§åˆ¶**ï¼šç†è§£åŸºäºè§’è‰²çš„æ•°æ®è®¿é—®æ§åˆ¶
- **å®¡è®¡æ—¥å¿—**ï¼šæŒæ¡å®‰å…¨å®¡è®¡æ—¥å¿—çš„å®ç°æ–¹æ³•

### 3.2 æ¶æ„è®¾è®¡é—®é¢˜

**å®‰å…¨æ¶æ„è®¾è®¡**
- **çºµæ·±é˜²å¾¡**ï¼šè®¾è®¡å¤šå±‚å®‰å…¨é˜²æŠ¤æ¶æ„
- **å®‰å…¨ç›‘æ§**ï¼šè®¾è®¡å®Œå–„çš„å®‰å…¨ç›‘æ§å’Œå‘Šè­¦ä½“ç³»
- **äº‹ä»¶å“åº”**ï¼šè®¾è®¡å®‰å…¨äº‹ä»¶çš„æ£€æµ‹å’Œå“åº”æœºåˆ¶
- **åˆè§„è¦æ±‚**ï¼šæ»¡è¶³å„ç§å®‰å…¨åˆè§„è¦æ±‚

**æŠ€æœ¯é€‰å‹è®¾è®¡**
- **å®‰å…¨å·¥å…·**ï¼šé€‰æ‹©åˆé€‚çš„å®‰å…¨é˜²æŠ¤å’Œç›‘æ§å·¥å…·
- **åŠ å¯†ç®—æ³•**ï¼šé€‰æ‹©åˆé€‚çš„åŠ å¯†ç®—æ³•å’Œå¯†é’¥ç®¡ç†æ–¹æ¡ˆ
- **è®¤è¯æ–¹æ¡ˆ**ï¼šé€‰æ‹©åˆé€‚çš„èº«ä»½è®¤è¯å’Œæˆæƒæ–¹æ¡ˆ
- **ç›‘æ§æ–¹æ¡ˆ**ï¼šé€‰æ‹©åˆé€‚çš„å®‰å…¨ç›‘æ§å’Œå“åº”æ–¹æ¡ˆ

### 3.3 å®æˆ˜æ¡ˆä¾‹åˆ†æ

**ç”µå•†ç³»ç»Ÿå®‰å…¨æ¡ˆä¾‹**
- **ç”¨æˆ·ä¿æŠ¤**ï¼šå¦‚ä½•ä¿æŠ¤ç”¨æˆ·è´¦æˆ·å’Œæ”¯ä»˜ä¿¡æ¯
- **æ•°æ®ä¿æŠ¤**ï¼šå¦‚ä½•ä¿æŠ¤ç”¨æˆ·éšç§å’Œäº¤æ˜“æ•°æ®
- **æ”»å‡»é˜²æŠ¤**ï¼šå¦‚ä½•é˜²æŠ¤å„ç§ç½‘ç»œæ”»å‡»
- **åˆè§„è¦æ±‚**ï¼šå¦‚ä½•æ»¡è¶³ç”µå•†å®‰å…¨åˆè§„è¦æ±‚

**é‡‘èç³»ç»Ÿå®‰å…¨æ¡ˆä¾‹**
- **äº¤æ˜“å®‰å…¨**ï¼šå¦‚ä½•ä¿æŠ¤é‡‘èäº¤æ˜“å®‰å…¨
- **é£æ§ç³»ç»Ÿ**ï¼šå¦‚ä½•å»ºç«‹é£é™©æ§åˆ¶ç³»ç»Ÿ
- **åˆè§„è¦æ±‚**ï¼šå¦‚ä½•æ»¡è¶³é‡‘èå®‰å…¨åˆè§„è¦æ±‚
- **å®¡è®¡è¦æ±‚**ï¼šå¦‚ä½•æ»¡è¶³é‡‘èå®¡è®¡è¦æ±‚

---

## ğŸ† æ€»ç»“ä¸å±•æœ›

.NETåº”ç”¨å®‰å…¨æ˜¯ä¸€ä¸ªå¤æ‚çš„ç³»ç»Ÿå·¥ç¨‹ï¼Œè¦çœŸæ­£æŒæ¡å®‰å…¨é˜²æŠ¤ï¼Œéœ€è¦ï¼š

1. **æ·±å…¥ç†è§£å®‰å…¨åŸç†**ï¼šç†è§£å„ç§æ”»å‡»åŸç†å’Œé˜²æŠ¤ç­–ç•¥
2. **æŒæ¡å®‰å…¨æŠ€æœ¯**ï¼šæŒæ¡èº«ä»½è®¤è¯ã€æˆæƒã€åŠ å¯†ç­‰å®‰å…¨æŠ€æœ¯
3. **å»ºç«‹å®‰å…¨ä½“ç³»**ï¼šå»ºç«‹å®Œæ•´çš„å®‰å…¨é˜²æŠ¤å’Œç›‘æ§ä½“ç³»
4. **å¹³è¡¡å„ç§å› ç´ **ï¼šåœ¨å®‰å…¨æ€§ã€å¯ç”¨æ€§ã€æ€§èƒ½ä¹‹é—´æ‰¾åˆ°å¹³è¡¡
5. **æŒç»­å­¦ä¹ æ”¹è¿›**ï¼šå…³æ³¨å®‰å…¨å¨èƒå‘å±•ï¼ŒæŒç»­æ”¹è¿›é˜²æŠ¤æªæ–½

**ğŸ’¡ é¢è¯•åŠ åˆ†ç‚¹**ï¼š
- æåˆ°æŠ€æœ¯è¶‹åŠ¿ï¼š"å…³æ³¨æœ€æ–°çš„å®‰å…¨å¨èƒå’Œé˜²æŠ¤æŠ€æœ¯ï¼Œå¦‚é›¶ä¿¡ä»»æ¶æ„ã€AIå®‰å…¨ç­‰"
- å±•ç¤ºå®‰å…¨è§†é‡ï¼š"äº†è§£äº‘åŸç”Ÿå®‰å…¨ã€DevSecOpsç­‰æ–°å…´å®‰å…¨ç†å¿µå’Œå®è·µ"

åªæœ‰æ·±å…¥ç†è§£å®‰å…¨é˜²æŠ¤çš„åŸç†å’Œæ–¹æ³•ï¼Œæ‰èƒ½åœ¨é¢è¯•ä¸­å±•ç°å‡ºçœŸæ­£çš„æŠ€æœ¯æ·±åº¦ï¼Œä¹Ÿæ‰èƒ½åœ¨é¡¹ç›®ä¸­æ„å»ºå®‰å…¨å¯é çš„ç³»ç»Ÿã€‚è®°ä½ï¼Œå®‰å…¨ä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œè€Œæ˜¯éœ€è¦æŒç»­å…³æ³¨å’Œæ”¹è¿›çš„è¿‡ç¨‹ï¼
